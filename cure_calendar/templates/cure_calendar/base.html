{% load static %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>{{ title }}</title>
        <link href="https://fonts.googleapis.com/css2?family=Rethink+Sans:wght@400;500;600;700&display=swap"
              rel="stylesheet">
        <link rel="stylesheet"
              type="text/css"
              href="{% static 'cure_calendar/css/cure_calendar/common.css' %}">
        <link rel="stylesheet"
              type="text/css"
              href="{% static 'cure_calendar/css/cure_calendar/table.css' %}">
        <link rel="stylesheet"
              type="text/css"
              href="{% static 'cure_calendar/css/cure_calendar/week.css' %}">
        <link rel="stylesheet"
              type="text/css"
              href="{% static 'cure_calendar/css/cure_calendar/line.css' %}">
        <link rel="stylesheet"
              type="text/css"
              href="{% static 'cure_calendar/css/cure_calendar/intake.css' %}">
        <link rel="stylesheet"
              type="text/css"
              href="{% static 'cure_calendar/css/cure_calendar/legend.css' %}">
        <link rel="stylesheet"
              type="text/css"
              href="{% static 'cure_calendar/css/cure_calendar/header.css' %}">
        <link rel="stylesheet"
              type="text/css"
              href="{% static 'cure_calendar/css/cure_calendar/phase_2_section.css' %}">
        <style>
            @page {
                size: A4 landscape;
                margin: 0;
            }

            *,
            *::before,
            *::after {
                box-sizing: border-box;
                margin: 0;
                padding: 0;
            }

            html,
            body {
                margin: 0;
                padding: 0;
                height: 210mm;
                /* A4 width */
                width: 297mm;
                /* A4 height */
            }

            body {
                display: flex;
                justify-content: center;
                align-items: flex-start;
                word-wrap: break-word;
                font-family: 'Rethink Sans';
            }

            .document__right-section {
                display: flex;
                width: 83pt;
                flex-direction: column;
                align-items: flex-start;
                gap: 12pt;
                align-self: stretch;
            }
        </style>
    </head>
    <body>
        <div>
            {% include "cure_calendar/header.html" %}
            <div style="padding-top: 12pt; display: flex; gap: 4pt">
                <div style="display: flex; flex-direction: column; gap: 12pt">
                    {% for month in months %}
                        <div style="display: flex;">
                            {% for week in month.weeks %}
                                <div class="week-outer-wrapper"
                                     style="margin-right: {% if forloop.counter == 1 or forloop.counter == 3 %}7px{% elif forloop.counter == 2 %}31px{% endif %};
                                            position: relative;
                                            z-index: {{ forloop.revcounter }}">
                                    <span class="week-number__text">{{ text.week }} {{ week.number }}</span>
                                    {% include "cure_calendar/week.html" with month=month %}
                                </div>
                            {% endfor %}
                        </div>
                    {% endfor %}
                </div>
                <div class="document__right-section">
                    {% include "cure_calendar/legend.html" %}
                    {% if phase_2.enabled %}
                        {% include "cure_calendar/phase_2_section.html" %}
                    {% endif %}
                </div>
            </div>
        </div>
        <script src="{% static 'cure_calendar/js/cure_calendar/prevent_text_overflow.js' %}"></script>
    </body>
</html>

{% load static %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Calendrier de votre cure Symp</title>
        <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap"
              rel="stylesheet">
        <link rel="stylesheet" href="{% static 'templates_app/css/report.css' %}">
        <link rel="stylesheet" href="{% static 'templates_app/css/tables.css' %}">
        <style>
            @page {
                margin: 0;
            }

            *,
            *::before,
            *::after {
                box-sizing: border-box;
                margin: 0;
                padding: 0;
            }

            html,
            body {
                margin: 0;
                padding: 0;
            }

            body {
                display: flex;
                max-width: 500px;
                justify-content: center;
                align-items: flex-start;
                margin: auto;
                font-family: Montserrat;
            }

            .dropdown-body {
                display: block !important;
            }
        </style>
    </head>
    <body>
        <div id="cure"
             class="section-dropdown dropdown"
             style="margin-top:24px;
                    background: #FFFFFF">
            <div class="dropdown-header">
                <img class="dropdown-icon"
                     src="{% static 'symp_api/images/report/cure.svg' %}" />
                <div class="h4">{{ static_sections.cure_title|safe }}</div>
                <img class="dropdown-arrow"
                     src="{% static 'symp_api/images/report/dropdown-arrow-green.svg' %}" />
            </div>
            <div class="dropdown-body">
                <div class="h6">{{ static_sections.cure_text1|safe }}</div>
                <div style="display:flex;
                            flex-direction:column;
                            row-gap:24px;
                            margin-top:24px">
                    {% if a5.apply_phases %}
                        <div class="tabs-wrapper">
                            <div class="tab tab-green h6 text-center active" target="cure-1">{{ static_sections.phase1|safe }}</div>
                            <div class="tab tab-green h6 text-center" target="cure-2">{{ static_sections.phase2|safe }}</div>
                        </div>
                    {% endif %}
                    <div class="cure-col-name">
                        {% with cure_template.section_titles|length as total %}
                            {% for section_titles in cure_template.section_titles %}
                                <p style="height: 100%;
                                          padding: 12px 4px;
                                          flex: 1 1 0;
                                          text-align: center;
                                          justify-content: center;
                                          display: flex;
                                          flex-direction: column;
                                          color: black;
                                          font-size: 12px;
                                          font-family: Montserrat;
                                          font-weight: 700;
                                          line-height: 20px;
                                          word-wrap: break-word">{{ section_titles | safe }}</p>
                                {% if forloop.counter < total %}
                                    <div style="width: 1px; height: 100%; background-color: black;"></div>
                                {% endif %}
                            {% endfor %}
                        {% endwith %}
                    </div>
                    {% if not a5.apply_phases %}
                        <div tab="cure-1"
                             class="tab-content"
                             data-display="flex"
                             style="display: flex;
                                    padding-top: 12px;
                                    flex-direction: column;
                                    align-items: flex-start;
                                    gap: 22px;
                                    align-self: stretch">
                            {% for product in a5.products %}
                                <div style="display: flex;
                                            padding: 12px 0;
                                            flex-direction: column;
                                            justify-content: center;
                                            align-items: center;
                                            gap: 8px;
                                            align-self: stretch;
                                            border-radius: 10px;
                                            border: 1px solid var(--Neutral-Gray-400, #B5BFB5);
                                            background: var(--Primary-Green-50, #F1F8F1)">
                                    <div style="display: flex;
                                                padding: 0 12px;
                                                flex-direction: column;
                                                justify-content: center;
                                                align-items: start;
                                                gap: 16px;
                                                align-self: stretch">
                                        <div class="h6">
                                            {{ static_sections.cure_product_recommended|safe }}:
                                            &nbsp;
                                            {% for nutrient in product.nutrients %}
                                                <span style="font-weight: 700;">{{ nutrient.label | striptags|safe }}</span>
                                                {% if forloop.counter < product.nutrients|length %}<span style="font-weight: 700;">,&nbsp;</span>{% endif %}
                                            {% endfor %}
                                        </div>
                                        <div style="display:flex;
                                                    width: 100%;
                                                    border:0.3px solid #000;
                                                    background: #FFFFFF">
                                            <div class="cure-items-layout">
                                                <span class="h6 cure-items-content">{{ product.label|striptags|safe }}</span>
                                            </div>
                                            <div style="width: 1px; background-color: black;"></div>
                                            <div class="cure-items-layout">
                                                <div class="h6 cure-items-content">{{ product.posology | striptags|safe }}</div>
                                            </div>
                                            <div style="width: 1px; background-color: black;"></div>
                                            <div class="cure-items-layout">
                                                <div class="h6 cure-items-content">{{ product.duration | striptags|safe }}</div>
                                            </div>
                                        </div>
                                        {% if product.delay %}
                                            <span class="h6" style="font-weight: 700;">{{ static_sections.cure_delay }}&nbsp;{{ product.delay }}</span>
                                        {% endif %}
                                    </div>
                                </div>
                                {% if forloop.counter < cure.phases.1.products.count %}
                                    <div style="width: 95%; height: 1px; background: #D1D9D8; margin: auto"></div>
                                {% endif %}
                            {% endfor %}
                        </div>
                    {% else %}
                        <div tab="cure-1"
                             class="tab-content"
                             data-display="flex"
                             style="display: flex;
                                    padding-top: 12px;
                                    flex-direction: column;
                                    align-items: flex-start;
                                    gap: 22px;
                                    align-self: stretch">
                            {% for product in a5.products %}
                                {% if product.phase == 1 %}
                                    <div style="display: flex;
                                                padding: 12px 0;
                                                flex-direction: column;
                                                justify-content: center;
                                                align-items: center;
                                                gap: 8px;
                                                align-self: stretch;
                                                border-radius: 10px;
                                                border: 1px solid var(--Neutral-Gray-400, #B5BFB5);
                                                background: var(--Primary-Green-50, #F1F8F1)">
                                        <div style="display: flex;
                                                    padding: 0 12px;
                                                    flex-direction: column;
                                                    justify-content: center;
                                                    align-items: start;
                                                    gap: 16px;
                                                    align-self: stretch">
                                            <div class="h6">
                                                {{ static_sections.cure_product_recommended|safe }}:
                                                &nbsp;
                                                {% for nutrient in product.nutrients %}
                                                    <span style="font-weight: 700;">{{ nutrient.label | striptags|safe }}</span>
                                                    {% if forloop.counter < product.nutrients|length %}<span style="font-weight: 700;">,&nbsp;</span>{% endif %}
                                                {% endfor %}
                                            </div>
                                            <div style="display:flex;
                                                        width: 100%;
                                                        border:0.3px solid #000;
                                                        background: #FFFFFF">
                                                <div class="cure-items-layout">
                                                    <span class="h6 cure-items-content">{{ product.label|striptags|safe }}</span>
                                                </div>
                                                <div style="width: 1px; background-color: black;"></div>
                                                <div class="cure-items-layout">
                                                    <div class="h6 cure-items-content">{{ product.posology | striptags|safe }}</div>
                                                </div>
                                                <div style="width: 1px; background-color: black;"></div>
                                                <div class="cure-items-layout">
                                                    <div class="h6 cure-items-content">{{ product.duration | striptags|safe }}</div>
                                                </div>
                                            </div>
                                            {% if product.delay %}
                                                <span class="h6" style="font-weight: 700;">{{ static_sections.cure_delay }}&nbsp;{{ product.delay }}</span>
                                            {% endif %}
                                        </div>
                                    </div>
                                    {% if forloop.counter < cure.phases.1.products.count %}
                                        <div style="width: 95%; height: 1px; background: #D1D9D8; margin: auto"></div>
                                    {% endif %}
                                {% endif %}
                            {% endfor %}
                        </div>
                        <div tab="cure-2" class="tab-content" style="display: none;">
                            <div style="display: flex;
                                        padding-top: 12px;
                                        flex-direction: column;
                                        align-items: flex-start;
                                        gap: 22px;
                                        align-self: stretch">
                                {% for product in a5.products %}
                                    {% if product.phase == 2 %}
                                        <div style="display: flex;
                                                    padding: 12px 0;
                                                    flex-direction: column;
                                                    justify-content: center;
                                                    align-items: center;
                                                    gap: 8px;
                                                    align-self: stretch;
                                                    border-radius: 10px;
                                                    border: 1px solid var(--Neutral-Gray-400, #B5BFB5);
                                                    background: var(--Primary-Green-50, #F1F8F1)">
                                            <div style="display: flex;
                                                        padding: 0 12px;
                                                        flex-direction: column;
                                                        justify-content: center;
                                                        align-items: start;
                                                        gap: 16px;
                                                        align-self: stretch">
                                                <div class="h6">
                                                    {{ static_sections.cure_product_recommended|safe }}:
                                                    &nbsp;
                                                    {% for nutrient in product.nutrients %}
                                                        <span style="font-weight: 700;">{{ nutrient.label | striptags|safe }}</span>
                                                        {% if forloop.counter < product.nutrients|length %}<span style="font-weight: 700;">,&nbsp;</span>{% endif %}
                                                    {% endfor %}
                                                </div>
                                                <div style="display:flex;
                                                            width: 100%;
                                                            border:0.3px solid #000;
                                                            background: #FFFFFF">
                                                    <div class="cure-items-layout">
                                                        <span class="h6 cure-items-content">{{ product.label|striptags|safe }}</span>
                                                    </div>
                                                    <div style="width: 1px; background-color: black;"></div>
                                                    <div class="cure-items-layout">
                                                        <div class="h6 cure-items-content">{{ product.posology | striptags|safe }}</div>
                                                    </div>
                                                    <div style="width: 1px; background-color: black;"></div>
                                                    <div class="cure-items-layout">
                                                        <div class="h6 cure-items-content">{{ product.duration | striptags|safe }}</div>
                                                    </div>
                                                </div>
                                                {% if product.delay %}
                                                    <span class="h6" style="font-weight: 700;">{{ static_sections.cure_delay }}&nbsp;{{ product.delay }}</span>
                                                {% endif %}
                                            </div>
                                        </div>
                                        {% if forloop.counter < cure.phases.2.products.count %}
                                            <div style="width: 95%; height: 1px; background: #D1D9D8; margin: auto"></div>
                                        {% endif %}
                                    {% endif %}
                                {% endfor %}
                            </div>
                        </div>
                    {% endif %}
                    {% if pro_type != "NUTRI" %}
                        {% if cure and cure.url %}
                            <a class="report-button-green h4"
                               href="{{ cure.url }}"
                               style="margin: 24px auto"
                               target="_blank">{{ static_sections.cure_command|safe }}</a>
                            <div class="h6 text-center""> {{ a5.static_content.simplycure_text|safe }} </div>
                        {% elif a5.link != None and a5.link != "" %}
                            <a class="report-button-green h4"
                               href="{{ a5.link }}"
                               style="margin: 24px auto"
                               target="_blank">{{ static_sections.cure_command|safe }}</a>
                            <div class="h6 text-center"">
                                {{ a5.static_content.simplycure_text|safe }}
                            </div>
                        {% else %}
                            <div class="h6 text-center"">{{ a5.static_content.no_simplycure_text|safe }}</div>
                        {% endif %}
                    {% else %}
                        <div class="h6 text-center"">
                            {{ a5.static_content.no_simplycure_text|safe }}
                        </div>
                    {% endif %}
                    <div class="h7" style="color:black;">{{ a5.static_content.footer_text|safe }}</div>
                    <div class="report-button-secondary h5"
                         style="margin-top:54px;
                                display:none">{{ static_sections.cure_mail|safe }}</div>
                </div>
            </div>
        </div>
        <!-- Load jQuery first (required dependency) -->
        <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
        <!-- Load your JavaScript file -->
        <script src="{% static 'templates_app/js/report.js' %}"></script>
    </body>
</html>
